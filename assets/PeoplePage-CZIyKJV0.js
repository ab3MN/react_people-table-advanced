import{j as e,L as p,c as o,u as g,a as f,g as P,S as x,b as j,r as y,P as b,d as N,e as v}from"./index-CeUTWIFU.js";import{T as k}from"./Title-CoUUMj6I.js";const L=({errorMessage:s,dataCy:a})=>e.jsx("p",{"data-cy":a,className:"has-text-danger",children:s}),u=({person:s})=>e.jsx(p,{to:`../${s.slug}`,className:o("",{"has-text-danger":s.sex==="f"}),children:s.name}),w=()=>{const{personId:s}=g();return{personId:s}},S=({person:s})=>{const{slug:a,sex:r,born:t,died:c,motherName:l,fatherName:n,mother:d,father:h}=s,{personId:m}=w();return e.jsxs("tr",{"data-cy":"person",className:o({"has-background-warning":m===a}),children:[e.jsx("td",{children:e.jsx(u,{person:s})}),e.jsx("td",{children:r}),e.jsx("td",{children:t}),e.jsx("td",{children:c}),e.jsx("td",{children:d?e.jsx(u,{person:d}):l}),e.jsx("td",{children:h?e.jsx(u,{person:h}):n})]})},i=({children:s,params:a,...r})=>{const[t]=f();return e.jsx(p,{to:{search:P(t,a)},...r,children:s})},E=[{title:"All",params:{sex:null}},{title:"Male",params:{sex:"m"}},{title:"Female",params:{sex:"f"}}],F=[{title:"16",century:"16"},{title:"17",century:"17"},{title:"18",century:"18"},{title:"19",century:"19"},{title:"20",century:"20"}],T=[{title:"Name",sortType:x.NAME},{title:"Sex",sortType:x.SEX},{title:"Born",sortType:x.BORN},{title:"Died",sortType:x.DIED}],C=({sortType:s})=>{const{sort:a,order:r}=j(),t=()=>a===s&&r?e.jsx("i",{className:"fas fa-sort-down"}):a===s?e.jsx("i",{className:"fas fa-sort-up"}):e.jsx("i",{className:"fas fa-sort"});return e.jsx("span",{className:"icon",children:t()})},I=({people:s})=>{const{getSortParams:a}=j();return e.jsxs("table",{"data-cy":"peopleTable",className:"table is-striped is-hoverable is-narrow is-fullwidth",children:[e.jsx("thead",{children:e.jsxs("tr",{children:[T.map(({sortType:r,title:t})=>e.jsx("th",{children:e.jsxs("span",{className:"is-flex is-flex-wrap-nowrap",children:[t,e.jsx(i,{params:a(r),children:e.jsx(C,{sortType:r})})]})},t)),e.jsx("th",{children:"Mother"}),e.jsx("th",{children:"Father"})]})}),e.jsx("tbody",{children:s.map(r=>e.jsx(S,{person:r},r.slug))})]})},R=()=>{const{filtredPeople:s,isLoading:a,error:r,people:t}=y.useContext(b),{centuries:c,name:l,sex:n}=N(),d=!t.length&&!a,h=!!(c.length||l||n),m=()=>{switch(!0){case!!r:return e.jsx(L,{dataCy:"peopleLoadingError",errorMessage:r});case d:return e.jsx("p",{"data-cy":"noPeopleMessage",children:"There are no people on the server"});case(!s.length&&h):return e.jsx("p",{children:"There are no people matching the current search criteria"});case!!s.length:return e.jsx(I,{people:s});default:return null}};return e.jsx("div",{className:"column",children:e.jsxs("div",{className:"box table-container",children:[a&&e.jsx(v,{}),m()]})})},A=()=>{const{name:s,centuries:a,sex:r,handleChangeName:t,toogleCenturies:c}=N();return e.jsx("div",{className:"column is-7-tablet is-narrow-desktop",children:e.jsxs("nav",{className:"panel",children:[e.jsx("p",{className:"panel-heading",children:"Filters"}),e.jsx("p",{className:"panel-tabs","data-cy":"SexFilter",children:E.map(({params:l,title:n})=>e.jsx(i,{params:l,className:o({"is-active":r===(l.sex?l.sex:"")}),children:n},n))}),e.jsx("div",{className:"panel-block",children:e.jsxs("p",{className:"control has-icons-left",children:[e.jsx("input",{"data-cy":"NameFilter",type:"search",className:"input",placeholder:"Search",onChange:l=>t(l.target.value),value:s}),e.jsx("span",{className:"icon is-left",children:e.jsx("i",{className:"fas fa-search","aria-hidden":"true"})})]})}),e.jsx("div",{className:"panel-block",children:e.jsxs("div",{className:"level is-flex-grow-1 is-mobile","data-cy":"CenturyFilter",children:[e.jsx("div",{className:"level-left",children:F.map(({century:l,title:n})=>e.jsx(i,{"data-cy":"century",params:{centuries:c(l)},className:o("button mr-1",{"is-info":a.includes(l)}),children:n},n))}),e.jsx("div",{className:"level-right ml-4",children:e.jsx(i,{"data-cy":"centuryALL",className:o("button","is-success",{"is-outlined":a.length}),params:{centuries:null},children:"All"})})]})}),e.jsx("div",{className:"panel-block",children:e.jsx(i,{"data-cy":"centuryALL",className:"button is-link is-outlined is-fullwidth",params:{centuries:null,sex:null,name:null},children:"Reset all filters"})})]})})},B=()=>e.jsxs(e.Fragment,{children:[e.jsx(k,{text:"People Page"}),e.jsx("div",{className:"block",children:e.jsxs("div",{className:"columns is-desktop is-flex-direction-row-reverse",children:[e.jsx(A,{}),e.jsx(R,{})]})})]});export{B as default};
