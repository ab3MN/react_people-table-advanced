import{j as e,L as h,c as o,r as m,P as u,u as P,g as y,S as d,a as j,b,d as v}from"./index-D3sAXgrQ.js";import{T as k}from"./Title-CI5eyIiN.js";const L=({errorMessage:s,dataCy:a})=>e.jsx("p",{"data-cy":a,className:"has-text-danger",children:s}),p=({person:s})=>e.jsx(h,{to:`../${s.slug}`,className:o("",{"has-text-danger":s.sex==="f"}),children:s.name}),x=({parent:s,parentName:a})=>{const t=a||"-";return e.jsx(e.Fragment,{children:s?e.jsx(p,{person:s}):t})},S=({person:s})=>{const{slug:a,sex:t,born:r,died:c,motherName:l,fatherName:n,mother:N,father:f}=s,{personId:g}=m.useContext(u);return e.jsxs("tr",{"data-cy":"person",className:o({"has-background-warning":g===a}),children:[e.jsx("td",{children:e.jsx(p,{person:s})}),e.jsx("td",{children:t}),e.jsx("td",{children:r}),e.jsx("td",{children:c}),e.jsx("td",{children:e.jsx(x,{parent:N,parentName:l})}),e.jsx("td",{children:e.jsx(x,{parent:f,parentName:n})})]})},i=({children:s,params:a,...t})=>{const[r]=P();return e.jsx(h,{to:{search:y(r,a)},...t,children:s})},w=[{title:"All",params:{sex:null}},{title:"Male",params:{sex:"m"}},{title:"Female",params:{sex:"f"}}],E=[{title:"16",century:"16"},{title:"17",century:"17"},{title:"18",century:"18"},{title:"19",century:"19"},{title:"20",century:"20"}],F=[{title:"Name",sortType:d.NAME},{title:"Sex",sortType:d.SEX},{title:"Born",sortType:d.BORN},{title:"Died",sortType:d.DIED}],T=({sortType:s})=>{const{sort:a,order:t}=j(),r=()=>a===s&&t?e.jsx("i",{className:"fas fa-sort-down"}):a===s?e.jsx("i",{className:"fas fa-sort-up"}):e.jsx("i",{className:"fas fa-sort"});return e.jsx("span",{className:"icon",children:r()})},C=({people:s})=>{const{getSortParams:a}=j();return e.jsxs("table",{"data-cy":"peopleTable",className:"table is-striped is-hoverable is-narrow is-fullwidth",children:[e.jsx("thead",{children:e.jsxs("tr",{children:[F.map(({sortType:t,title:r})=>e.jsx("th",{children:e.jsxs("span",{className:"is-flex is-flex-wrap-nowrap",children:[r,e.jsx(i,{params:a(t),children:e.jsx(T,{sortType:t})})]})},r)),e.jsx("th",{children:"Mother"}),e.jsx("th",{children:"Father"})]})}),e.jsx("tbody",{children:s.map(t=>e.jsx(S,{person:t},t.slug))})]})},A=()=>{const{filtredPeople:s,isLoading:a,error:t}=m.useContext(u),r=!s.length&&!a,c=()=>t?e.jsx(L,{dataCy:"peopleLoadingError",errorMessage:t}):r?e.jsx("p",{"data-cy":"noPeopleMessage",children:"There are no people on the server"}):s.length?e.jsx(C,{people:s}):null;return e.jsx("div",{className:"column",children:e.jsxs("div",{className:"box table-container",children:[a&&e.jsx(b,{}),c()]})})},I=()=>{const{name:s,centuries:a,sex:t,handleChangeName:r,toogleCenturies:c}=v();return e.jsx("div",{className:"column is-7-tablet is-narrow-desktop",children:e.jsxs("nav",{className:"panel",children:[e.jsx("p",{className:"panel-heading",children:"Filters"}),e.jsx("p",{className:"panel-tabs","data-cy":"SexFilter",children:w.map(({params:l,title:n})=>e.jsx(i,{params:l,className:o({"is-active":t===(l.sex?l.sex:"")}),children:n},n))}),e.jsx("div",{className:"panel-block",children:e.jsxs("p",{className:"control has-icons-left",children:[e.jsx("input",{"data-cy":"NameFilter",type:"search",className:"input",placeholder:"Search",onChange:l=>r(l.target.value),value:s}),e.jsx("span",{className:"icon is-left",children:e.jsx("i",{className:"fas fa-search","aria-hidden":"true"})})]})}),e.jsx("div",{className:"panel-block",children:e.jsxs("div",{className:"level is-flex-grow-1 is-mobile","data-cy":"CenturyFilter",children:[e.jsx("div",{className:"level-left",children:E.map(({century:l,title:n})=>e.jsx(i,{"data-cy":"century",params:{centuries:c(l)},className:o("button mr-1",{"is-info":a.includes(l)}),children:n},n))}),e.jsx("div",{className:"level-right ml-4",children:e.jsx(i,{"data-cy":"centuryALL",className:o("button","is-success",{"is-outlined":a.length}),params:{centuries:null},children:"All"})})]})}),e.jsx("div",{className:"panel-block",children:e.jsx(i,{"data-cy":"centuryALL",className:"button is-link is-outlined is-fullwidth",params:{centuries:null,sex:null,name:null},children:"Reset all filters"})})]})})},D=()=>e.jsxs(e.Fragment,{children:[e.jsx(k,{text:"People Page"}),e.jsx("div",{className:"block",children:e.jsxs("div",{className:"columns is-desktop is-flex-direction-row-reverse",children:[e.jsx(I,{}),e.jsx(A,{})]})})]});export{D as default};
